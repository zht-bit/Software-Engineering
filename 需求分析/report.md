该文档包括**软件项目需求分析报告**和**软件需求规格说明**两部分。下面是该文档的相关索引：

[TOC]

# 软件项目需求分析报告

## 引言

### 编写目的

​    为软件的开发者能更好的理解和明确软件开发的需求，安排项目与进度、组织软件开发与测试，撰写本文档。本文档供项目组成员，软件开发人员参考。

​	本项目的目的是开发一个可以播放主流的音乐文本格式的播放器。设计的主要实现功能是播放MP3等格式的音乐文件，并且能控制播放，暂停，停止，音量控制，选择上一曲，选择下一曲，更改皮肤歌曲列表文件的管理操作，在线播放，读取存储卡播放等多种播放控制，界面简明，操作简单。

### 参考资料

该模板参考了 https://zhuanlan.zhihu.com/p/256436312

## 需求概述

### 原始需求

系统的功能需求，我们分成三个主要部分，即播放器的基本控制需求，功能需求和用户体验需求。以下分别描述：

#### 一、播放器的基本控制需求

- 播放:点击播放列表中的歌曲进行播放，播放时跳转播放界面，并显示歌曲信息，同时会匹配歌词，把相应的歌词显示在歌词面板中。
- 停止:当歌曲正在播放时，点击歌曲播放界面下方的停止键，停止当前播放的歌曲，同时歌词面板中的歌词清空。
- 暂停:当歌曲正在播放时，点击歌曲播放界面下方的暂停键，暂停当前播放的歌曲，同时歌词停止滚动。
- 上一曲:歌曲正在播放，点击上一曲键，播放列表中上一首歌曲。
- 下一曲:歌曲正在播放，点击下一曲键，播放列表中下一首歌曲。
- 播放列表:点击进入歌曲列表界面。

#### 二、播放器的扩展功能需求

- 实现扫描识别本地音乐，方便用户广泛使用实现的音乐播放器；
- 实现捕获/丢弃音乐焦点，当需要语音、视频或其他需要扬声器输出声音时，自动暂停，或者收到通知的时候音乐的音量变小随后恢复；
- 实现硬件软件设备配合，实现耳机线控，并在耳机拔出或声音输出设备变换时暂停播放；
- 实现在锁屏或者小窗控制播放器。

####  三、播放器友好使用需求

- 视觉外观：使用播放器时，播放器根据歌曲文件的特性，通过视觉外观动态显示，外观优美。
- 系统稳定：使用播放器时能显示播放器的状态，是播放还是暂停，播放音乐时稳定。
- 后台：使用播放器时，能够进行后台播放，并且在手机桌面上显示缩小化的播放器，歌词滚动显示。
- 播放模式：播放音乐时，更改播放模式能够顺利地、快速地、无差错地完成模式的转换。
- 界面需求：播放器界面要求布局合理，颜色舒适，控制按钮友好；为了较少开发工程量，可以借鉴现在流行的播放器的皮肤作为播放器的界面目标需求。
- 性能需求：播放器响应时间必须满足Android手机系统响应时间，因此当要求歌曲播放、暂停、停止、上一曲、下一曲、进入列表等操作时，软件响应时间最长均不超过系统无响应时间。
- 数据库需求：Android自带的媒体库基于PacketVideo OpenCORE，该库支持多种常用的音频格式。编码格式MPEG4、MP3。音乐文件的解析:对于常用的音乐文件格式进行解析，如:Mp3格式。
- 歌曲的存储:对于添加的歌曲进行存储，删除的歌曲进行移除。错误信息的存储:对于系统检查到的错误进行存储记忆。
- 可靠性要求：系统能持续运行，不影响其他程序的使用，不多占用内存，不会造成死机等问题。

### 隐藏需求

​	该软件的用户指，下载、安装并使用该软件进行音乐播放的使用者。

​	如果仅完成原始需求，很有可能在使用过程中，用户会产生新的隐藏需求。此类需求未被直接提及，但会确实影响用户的使用体验。需要在完成原始需求的基础上，考虑以下几个方面的优化。

- 尽可能全面的曲库：不全面的曲库极有可能会导致用户直接弃用

- 人性化的交互界面：界面的交互应该流畅，交互逻辑应该简单而合理

- 播放的流畅性：音频的卡顿十分明显，应该尽量避免

- 尽可能好的音质：现代用户越来越追求好的音质，应平衡好音质和加载流畅性

## 开发方法

###  软件开发方法：

面向对象方法

面向对象的开发方法是自底而上的，主要表现为和现实事物结合起来，把世间万物抽象出来，形成一个个的抽象对象。相比结构化法有更好的复用性，分析、设计、实现三个阶段界限不明确，其关键点在于建立一个全面的、合理的、统一的模型。

使用UML为开发团队提供标准通用的设计语言来开发和构建计算机应用。通过使用UML，小组成员能够阅读和交流系统架构和设计规划。UML支持面向对象的技术，能够准确的方便地表达面向对象的概念，体现面向对象的分析和设计风格。

建立音乐播放器各功能模块的模型以及用例，以及音乐播放器与用的模型以及用例。

### 软件开发模型：

瀑布模型：

瀑布模型也称之为生命周期法，是结构方法中最常用的开发模型，其讲究的是从需求获取到开发到测试像瀑布样顺流而下。瀑布模型的开发构成如下图：

![watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2E3Njc4MTU2NjI=,size_16,color_FFFFFF,t_70#pic_center](.\watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2E3Njc4MTU2NjI=,size_16,color_FFFFFF,t_70#pic_center.png)

## 质量保证、验证和确认准则

软件质量：

        1.软件需求是度量软件质量的基础。不符合需求的软件就不具备质量。
        2.在各种标准中定义了一些开发准则，用来指导软件人员用工程化的方法来开发软件。
        3.往往会有一些隐含的需求没有明确地提出来。

软件质量保证策略:

         1.审查。2.复查和管理复审。3.测试。

循环测试路径：

软件测试：软件测试是对软件活动，软件设计，软件编码进行差错和纠错的活动。（包括代码执行活动与人工活动）

程序测试：它是对编码阶段的语法错，语义错，运行错进行查找的编码执行活动。找出编码中错误的代码执行活动称程序测试。纠正编码中的错误的执行活动称程序调试。

测试的原则：

        1.测试前要认定被测试软件有错，不要认为软件没有错。
        2.要预先确定被测试软件的测试结果。
        3.要尽量避免测试自己编写的程序
        4.测试要兼顾合理输入与不合理输入数据。
        5.测试要以软件需求规格说明书为标准
        6.要明确找到的新错与已找到的旧错成正比。
        7.测试是相对的，不能穷尽所有的测试，要据人力物力安排测试，并选择好测试用例与测试方法。
        8.测试用例留作测试报告与以后的反复测试用，重新验证纠错的程序是否有错。

测试方法：

        静态分析技术。动态测试技术。白盒法。黑盒法。

软件测试方法：

        按照测试过程是否在实际应用环境中来分有静态分析与动态测试。
    
        测试方法有分析方法（包括静态分析法与白盒法）与非分析方法（黑盒法）。白盒法是通过分析程序内部的逻辑与执行路线来设计测试用例，进行测试的方法，白盒法也称逻辑驱动方法。黑盒法是功能驱动方法，仅根据1/0数据条件来设计测试用例，而不管程序内部结构与路径如何。

软件质量模型：Boehm,McCall,ISO

Boehm:

![img](.\watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0NpZWxfWQ==,size_16,color_FFFFFF,t_70.jpeg)

 McCall:

![img](.\watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0NpZWxfWQ==,size_16,color_FFFFFF,t_70-16494075642532.jpeg)

 ISO:

![img](.\watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0NpZWxfWQ==,size_16,color_FFFFFF,t_70-16494075703194.jpeg)

## 分析场景

### 业务流程图

描述实际业务的过程和特点，即业务建模，可以通过简易流程图，时序图等表达。

在移动端和PC端的查询播放业务过程相同。这里使用同一张图来表示：

![player](.\player.png)

### 功能实例化

*依照面对的需求，经过以上的分析，拆成一个或几个相对独立的功能（主要目的是为了开发和测试形成条理性），并尽可能总结各个功能的验收准则。(包括开发方法、交付进度、成本预算)*

需要开发四个板块，分别为：客户端(交互界面)模块、本地数据库模块、服务器数据库模块、音乐解码器模块



## 验收规程

### 验收测试目的

通过验收测试判断产品质量是否符合产品需求、功能实现是否正确，性能和安全性方面是否符合发布标准，并且产品可以最终上线。

### 验收测试范围

#### 界面测试

所有页面浏览，连接的正确、所有功能按钮及界面显示正确

#### 功能测试

所有需求文档描述的功能实现正确

#### 性能测试

重点业务功能、性能能满足上线运营需求

#### 安全性测试

接口和数据调用等方面符合安全性规范；没有安全性漏洞

### 验收测试流程

验收测试基本工作流程如下：

#### 准入条件检测

##### 文档

进入验收测试的文档准备齐全：

a) 验收版本的需求文档（提交方提供）：要求需求文档与最终提交验收测试的程序完全匹配 ；

b) 验收版本的测试用例（提交方提供）：要求测试案例覆盖最终版本的需求文档；

c) 验收版本的测试告（提交方提供）：在测试报告书中说明测试总体情况，缺陷列表及修复情况；

##### 缺陷

要求开发方在Windows10兼容环境中，对需要文档上提及的所有功能进行全面测试，且提交验收测试时，开发方发现的所有缺陷都已解决。

##### 测试环境

验收测试环境准备完成，与线上真实环境一致

我方项目负责人负责测试环境控制，保证测试期间环境一致、稳定

##### 沟通和联系

1. 提交验收测试的开发方负责人联系方式及测试工程师联系方式齐全 ；
2. 提交验收测试缺陷的沟通渠道建立完毕，要求快捷、准确、反馈及时 ；

#### 验收测试

##### 文档验收

进入标准：文档准备必须齐全且符合标准，可以进入文档验收流程

中断标准：

1. 需求文档并非最终版，需求文档上描述的功能程序并未实现

2. 测试用例与需求文档不匹配，测试用例中测试的模块在需求文档中不存在或者需求文档中的功能模块未在测试用例中体现

3. 测试报告书不完整，遗留缺陷不符合遗留缺陷允许限制的数量

退出标准：

文档符合标准并通过验收，进入程序验收流程

##### 程序功能验收

进入标准：文档验收流程结束

中断标准：

1. 出现较大缺陷

2. 小缺陷达到3－10个（视项目大小而定）

3. 验收测试过程中，提交新的版本

退出标准：

验收测试合格，缺陷按照标准修复完成

##### 验收完成

1．验收完成后质量保证部提交的文档：

a) 最终版需求文档

b) 提交方提供的最终版测试用例

c) 提交方提供的最终版测试报告

d) 质量保证部提供的最终版验收测试报告

2．验收完成后提交程序：

## 附录



***



# 软件需求规格说明

## 引言

### 目的

本需求分析文档的目的是说明音乐播放器最终所运行的条件，性能要求及要实现的功能，为进一步设计与实现打下基础。本文档以文档形式将用户对软件的需求明确下来，是与用户沟通的成果，也是供用户验收项目时的参考。

本文档预期读者为：用户，项目管理人员，软件设计人员，编程人员，测试人员等项目相关人员。

### 范围

本项目的目的是开发一个可以播放主流的音乐文本格式，本设计的实现主营功能是播放MP3,WAV、OGG等格式的音乐文件，并且能控制播放、暂停、停止、音量控制、选择上一曲、选择下一曲、视觉外观、列表文件盒、歌曲文件的管理操作等多种播放控制，界面简明，操作简单。

### 定义、简写和缩略语

+ 文件管理：将选定的文件修改，分类，播放，查询操作。
+ 文件标签管理：将收藏的文件进行标签添加，修改，保存操作。
+ 文件列表维护：将文件添加到播放器中的操作，并对列表进行维护。
+ 文件搜索：可自动搜索，也可手动搜索。
+ 后台运行：程序运行不出现窗口。

### 引用文件



### 综述

本文档将会在第二章对该音乐播放器进行总体描述，包括产品描述、产品功能、用户特点、约束、假设和依赖关系、需求分配；在第三种描述具体需求。

## 总体描述

### 产品描述

+ 系统接口；

  操作系统：Windows 10，支持环境：Android 1.6 以上版本，开发环境：Visual Studio 2019

+ 用户界面；

  播放器界面要求布局合理，颜色舒适，控制按钮友好；为了较少开发工程量，可以借鉴现在流行的播放器的皮肤作为播放器的界面日标需求。

+ 硬件接口；

  支持USB2.0 和 USB3.0

+ 软件接口；

  该项目所有接口使用的都是由网易云音乐提供的开放接口, 最终请求的地址是**硅谷云服务器**使用 NodeJs 搭建的服务器接口，流程为先请求搭建好的NodeJs 服务器，由 NodeJs 转发请求给网易云音乐的服务器，此举的目的是为了接口规范, 统一化。

+ 通信接口；

  无特殊需求。

+ 内存；

  以数据库的方式存放在本地缓存。

+ 运行；

+ 现场适应性需求

### 产品功能

系统的功能，即播放器的基本控制需求，播放列表管理需求。

+ 播放器的基本控制需求

  + 播放：

    双击播放列表中的歌曲进行播放，播放时会将该歌曲的信息显示的右边的歌曲信息面板中，同时会匹配歌词，把相应的歌词显示在右边的歌词面板中。

  + 停止：

    在歌曲列表下方有一个小按钮，当歌曲正在播放时，显示的是可停止的按钮，点击则停止当前播放的歌曲。

+ 播放列表管理

  + 添加歌曲类：

    在播放列表中单击右键，选择添加歌曲类型则弹出一个添加歌曲类型的会话框，在会话中填上正确的信息（歌曲类型编号不能重复）后提交，则弹出“添加成功"的消息提示，否则弹出“添加失败"的相关信息。

  + 添加歌曲：

    选中歌曲类型后，单击右键选择添加歌曲或者点击左下角的添加按钮则弹出一个添加歌曲信息的会话框，填入歌曲信息（歌名不能重复）后点击提交则进行添加，添加成功则更新了歌曲列表，否则弹
    出相应的提示示框，如：歌曲已经存在。

  + 删除歌曲：

    选中歌曲后，单击右键选择删除歌曲或者点击左下角的删除则弹出确认框：

  + 删除歌曲类型：选中要删除的歌曲类型，单击右键删除歌曲类型，则弹出确认框，选中“是”则册删除，否则无操作。

  + 查找：点击左下角的查找，会弹出一个输入框，输入歌名的一部分（包含歌名）进行查找，查找到的歌曲会显示在输入框上方，点击查找到的歌曲进行播放。添加歌曲时，歌曲名不能为空，歌曲地址不能为空（否则播放时会是无效路径），若为空，会弹出相应的提示信息。
    （注：添加歌曲类型时，类型编号和名称都不能为空）

### 用户特点

本产品对于任何用户都实用。无论年龄，性别，种族，信仰。只要喜欢音乐，热爱音乐，都可使用。

### 约束

1. 开发周期短：一个月的开发周期需要开发人员合理地计划时间，做到多任务并行处理。
2. 方法和技术的使用受到限制：项目团队成员的技术水平还不够成熟，需要同时学习多种技术和开发中的能力。
3. 开发人员少：两个人的开发需要每个人承担更多的任务，需要每个人不带抱怨和拖延的工作，并需要多加商讨对一些碰到的问题给出最佳的解决或替代方案。

### 假设和依赖关系

**经济上的可行性**

Android是Google历经数年和投资数亿美元开发出来的智能手机系统，是基于Linux内核的操作系统，是Google公司在2007年11月5日公布的手机操作系统。随着各大移动终端生产商大力开发和生产基于Android的移动智能设备，Android迅速得到业界和社会的认可，并成为整个产业的热点，基于Android平台的各类人才逐渐成为各大企业竞相争夺的焦点。而且Android是一个开放的系统，不管是企业还是个人都可以参与来表达自已的创意和想法。

**技术上的可行性**

Google发起了围绕Android的组织一开放手机联盟，其英文全称为“Open Handset Alliance”，它采用了软件堆层(software stack，又名以软件叠层)的架构，主要分为三部分。底层LiuX内核只提供基本功能；其他的应用软件则由各公司自行开发，部分程序以Java编写。

**操作上的可行性**

本系统采用Android框架，可以在Visual Studio中安装Android开发插件，使用Android模拟器以及使用任意Android终端。模拟器和真正的Android手机没有太大区别。

综合以上三方面，该系统具有很高的开发可行性，无论是从技术上经济上还是操作上，故此，可以设计该系统流程图，建立数据字典。

### 需求分配

+ 对功能的规定
  功能需求定义了开发人员必须实现的软件功能，使得用户能完成他们的任务，从而满足了用户的业务需求。用户需求文档描述了用户使用产品必须要完成的任务。音乐播放器的音乐播放、在线音乐播放及会员特权的换肤等功能。

## 具体需求

+ 精度
  (1)精确查找手机SD卡上的音乐文件。
  (2)精确播放音乐文件：
  (3)精确地进行上一曲，下一曲，暂停，播放，增音，减音。

+ 时间特性要求
  根据Android手机系统要求无响应时间为5秒，所以就有如下性能要求：
  (1)当要求歌曲播放时，程序响应时间最长不能超过2秒
  (2)当要求歌曲暂停时，程序响应时间最长不能超过1秒
  (3)当要求歌曲上下一首时，程序响应时间最长不能超过2秒

+ 灵活性
  (1)适用于android1.6以上任何版本，
  (2)适用于任何尺寸大小的屏幕。
  (3)适用于任何喜欢音乐的用户。

+ 数据管理能力要求
  准确的查找到SD卡上的音乐文件。准确的播放选定的音乐，不损害音乐文件及其数据。

+ 故障处理要求
  (1)通到软件运行停止，清理手机内存，再次重启软件
  (2)通到有的音乐不能播放，请将音乐文件放入SD卡中的MYmusic文件夹中，MYmusic文件夹中不能再有下属文件夹。

+ 数据库与DDL

  为实现信息的持久化存储，使音乐播放器的存储功能得以实现，我们需要数据库的支持，因此，我们需要为音乐播放器设计一个用来存储歌曲相关信息的简易数据库。

  一，字段、属性设计（表、图）

  应需求功能要求，本软件的存储功能需要两张表来实现，即曲文件表File-table和歌曲表music-table。

  File-table:

  | 属性     | 数据类型 | 完整性约束 | 主键        |
  | -------- | -------- | ---------- | ----------- |
  | ID       | INTEGER  | NOT NULL   | PRIMARY KEY |
  | Filename | TEXT     | NOT NULL   |             |
  | Filepath | TEXT     |            |             |
  | Sort     | INTEGER  |            |             |

  music-table:

  | 属性   | 数据类型 | 完整性约束 | 主键        |
  | ------ | -------- | ---------- | ----------- |
  | ID     | INTEGER  | NOT NULL   | PRIMARY KEY |
  | Title  | TEXT     | NOT NULL   |             |
  | ARTIST | TEXT     |            |             |
  | ALBUM  | TEXT     |            |             |
  | SIZE   | LONG     |            |             |

  数据库创建及连接

  | 序号 | 字段名   | 字段描述 | 数据类型 | 长度 | 允许空值 | 主键 | 说明 |
  | ---- | -------- | -------- | -------- | ---- | -------- | ---- | ---- |
  | 1    | playlist | 播放列表 | varchar  | 255  | N        | Y    |      |

  | 序号 | 字段名   | 字段描述 | 数据类型 | 长度 | 允许空值 | 主键 | 说明 |
  | ---- | -------- | -------- | -------- | ---- | -------- | ---- | ---- |
  | 1    | title    | 歌曲名   | varchar  | 127  | N        | Y    |      |
  | 2    | artist   | 歌手名   | varchar  | 127  | Y        |      |      |
  | 3    | time     | 播放时间 | varchar  | 31   | Y        |      |      |
  | 4    | filepath | 歌曲路径 | varchar  | 255  | Y        |      |      |

## 附录

